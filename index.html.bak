<!DOCTYPE html>
<html lang="es-MX">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUKURO - A/V SYNTHESIS</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js Library -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
            }
        }
    </script>
    
    <!-- Google Fonts (VT323 & DotGothic16 for Japanese) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=VT323&display=swap" rel="stylesheet">

    <style>
        /* Estilos personalizados para la estética "acid" - TEMA BLANCO */
        body {
            font-family: 'VT323', monospace;
            background-color: #000000;
            color: #e0e0e0; /* Color principal: Blanco LED */
            overflow: hidden;
        }
        
        /* Estilo para Katakana */
        .katakana {
            font-family: 'DotGothic16', monospace;
            font-weight: 400;
        }

        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            outline: none;
        }

        /* Animación Glitch (Conserva colores "acid") */
        @keyframes glitch {
            0% { text-shadow: 2px 0 #ff00ff, -2px 0 #00ffff; transform: translate(0); }
            20% { text-shadow: 1px 1px #ff00ff, -1px -1px #00ffff; transform: translate(-1px, 1px); }
            40% { text-shadow: -2px 1px #ff00ff, 2px -1px #00ffff; transform: translate(1px, -1px); }
            60% { text-shadow: 1px -2px #ff00ff, -1px 2px #00ffff; transform: translate(-1px, 1px); }
            80% { text-shadow: -1px 2px #ff00ff, 1px -2px #00ffff; transform: translate(1px, -1px); }
            100% { text-shadow: 2px 0 #ff00ff, -2px 0 #00ffff; transform: translate(0); }
        }

        .glitch-text {
            animation: glitch 0.5s cubic-bezier(.25, .46, .45, .94) both infinite;
        }

        /* Sombra de "neón" ahora blanca */
        .neon-shadow {
            text-shadow: 0 0 5px #e0e0e0, 0 0 10px #e0e0e0, 0 0 20px #e0e0e0, 0 0 40px #e0e0e0;
        }

        .content-box {
            background-color: rgba(16, 16, 16, 0.75);
            backdrop-filter: blur(10px) saturate(200%);
            -webkit-backdrop-filter: blur(10px) saturate(200%);
            border: 1px solid #e0e0e0; /* Borde Blanco */
            box-shadow: 0 0 15px rgba(224, 224, 224, 0.3); /* Sombra Blanca */
        }

        ::selection { background: #ff00ff; color: #000000; }
        
        .content-box-inner::-webkit-scrollbar { width: 8px; }
        .content-box-inner::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.5); }
        .content-box-inner::-webkit-scrollbar-thumb { background-color: #e0e0e0; border: 1px solid #000; } /* Scrollbar Blanca */

        .nav-link {
            transition: all 0.2s ease-in-out;
            text-shadow: 0 0 5px #e0e0e0; /* Sombra de texto Blanca */
            cursor: pointer;
            text-align: center; /* Asegurar que el texto esté centrado */
        }
        .nav-link:hover, .nav-link.active {
            color: #000000;
            background-color: #e0e0e0; /* Fondo Blanco en hover/active */
            text-shadow: 0 0 5px #e0e0e0, 0 0 10px #e0e0e0;
            box-shadow: 0 0 10px #e0e0e0, 0 0 20px #e0e0e0;
        }
        
        .form-input, .form-textarea, .form-select, .form-radio {
            background-color: rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0; /* Borde Blanco */
            color: #e0e0e0; /* Texto Blanco */
            padding: 8px 12px;
            width: 100%;
            border-radius: 4px;
            font-family: 'VT323', monospace;
        }
        
        .form-radio {
            width: auto;
            padding: 0;
            margin-right: 8px;
            cursor: pointer;
            font-size: 1.125rem;
            transition: all 0.2s ease;
        }
        /* Estilo para el selector de fecha */
        .form-input[type="date"] { color-scheme: dark; }
        .form-input[type="date"]::-webkit-calendar-picker-indicator {
            background-color: #e0e0e0; /* Indicador Blanco */
            border-radius: 2px;
            cursor: pointer;
        }
        /* Corregir el color de texto del select en Safari/iOS */
        .form-select option {
            background-color: #111;
            color: #e0e0e0;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            box-shadow: 0 0 10px #e0e0e0; /* Foco Blanco */
            background-color: rgba(0, 0, 0, 0.8);
        }
        /* Estilo para campos inválidos */
        .form-input.invalid, .form-textarea.invalid, .form-select.invalid {
            border-color: #ff0000; /* Borde Rojo */
            box-shadow: 0 0 10px #ff0000; /* Sombra Roja */
        }
        .form-input:read-only {
            background-color: rgba(0, 0, 0, 0.2);
            color: #e0e0e0;
            border-style: dashed;
        }
        .form-label { display: block; margin-bottom: 0.5rem; text-shadow: 0 0 3px #e0e0e0; }
        
        .form-checkbox { 
            margin-right: 0.5rem;
            accent-color: #facc15; /* Yellow-400 */
            transform: scale(1.5);
        }
        
        .submit-btn {
            background-color: transparent;
            border: 1px solid #e0e0e0; /* Botón Blanco */
            color: #e0e0e0;
        }
        .submit-btn:hover { background-color: #e0e0e0; color: #000000; box-shadow: 0 0 15px #e0e0e0; }
        .submit-btn:disabled {
            border-color: #555555; /* Deshabilitado Gris */
            color: #555555;
            cursor: not-allowed;
            background-color: rgba(0, 0, 0, 0.2);
            box-shadow: none;
        }

        /* Estilos de Impresión */
        @media print {
            body {
                background: #ffffff !important; /* Fondo blanco para impresión */
            }
            
            /* Ocultar TODO menos el contenedor del modal */
            #three-canvas, #main-app-container, footer {
                display: none !important;
            }
            
            #quote-modal {
                display: block !important;
                position: static !important;
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                max-height: none !important;
                overflow: visible !important;
                background: #ffffff !important;
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
            }

            #quote-modal-content {
                display: block !important;
                position: static !important;
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                max-height: none !important;
                overflow: visible !important;
                background: #ffffff !important;
                color: #000000 !important;
                border: none !important;
                box-shadow: none !important;
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
            }

            /* Muestra el contenedor de impresión y oculta el en vivo */
            #quote-summary-print-container { display: block !important; }
            #quote-summary { display: none !important; }
            
            #quote-summary-print {
                display: block !important;
                color: #000 !important;
                font-size: 12pt !important;
                font-family: Arial, sans-serif !important; /* Fuente segura para impresión */
            }
            
            #quote-summary-print h1 { font-size: 24pt; color: #000; font-weight: bold; }
            #quote-summary-print h2 { font-size: 18pt; color: #000; font-weight: bold; }
            #quote-summary-print p { font-size: 12pt; color: #000; margin-bottom: 8px; }
            #quote-summary-print strong { color: #333 !important; }
            #quote-summary-print .text-yellow-300 { color: #000 !important; font-weight: bold; }
            #quote-summary-print .text-red-500 { color: #cc0000 !important; font-weight: bold; }
            #quote-summary-print hr { border-color: #999 !important; }
            
            /* Ocultar botones e UI del modal */
            #modal-controls, #modal-overlay, #quote-modal-header h2 {
                display: none !important;
            }
            /* Ocultar el título de confirmar */
            #quote-modal-header h2 {
                display: none !important;
            }
        }
        
        /* Style the date picker calendar icon to be yellow */
        #date-picker-input::-webkit-calendar-picker-indicator {
            filter: invert(85%) sepia(69%) saturate(500%) hue-rotate(0deg) brightness(105%) contrast(103%);
            cursor: pointer;
        }
        
        #date-picker-input::-webkit-calendar-picker-indicator:hover {
            filter: invert(85%) sepia(69%) saturate(700%) hue-rotate(0deg) brightness(110%) contrast(103%);
        }
    </style>
</head>
<body class="w-full h-screen overflow-hidden text-base sm:text-lg md:text-xl">

    <!-- Canvas de Fondo 3D -->
    <canvas id="three-canvas"></canvas>

    <!-- UI Principal -->
    <div id="main-app-container" class="relative w-full h-full p-2 sm:p-4 md:p-6 lg:p-8 flex flex-col items-center justify-center">
        
        <main class="content-box rounded-lg w-full max-w-4xl h-full max-h-[90vh] md:max-h-[85vh] flex flex-col p-3 sm:p-4 md:p-6 lg:p-8">
            
            <!-- Header: Logo -->
            <header class="text-center mb-4 md:mb-6">
                <h1 class="text-5xl sm:text-7xl md:text-8xl font-bold glitch-text" style="color: #ffffff; text-shadow: 3px 3px #00ff00, -3px -3px #ff00ff;">
                    FUKURO
                </h1>
                <p class="text-2xl sm:text-3xl md:text-4xl katakana neon-shadow">フクロウ</p>
                <p class="text-lg sm:text-xl md:text-3xl tracking-widest text-yellow-300" style="text-shadow: 0 0 5px #facc15, 0 0 10px #facc15;">
                    A/V SYNTHESIS
                </p>
            </header>
            
            <!-- Backend Login Button -->
            <div class="text-right mb-4">
                <button 
                    id="backend-login-btn" 
                    class="nav-link submit-btn px-4 py-2 rounded-lg text-sm sm:text-base cursor-pointer"
                    title="Acceder al backend"
                >
                    [ BACKEND ]
                </button>
            </div>

            <!-- Área de Contenido (Directo al Formulario) -->
            <div id="content-area" class="content-box-inner flex-grow overflow-y-auto p-4 border border-dashed border-gray-500/50 rounded-lg">
                
                <!-- TÍTULO CAMBIADO AQUÍ -->
                <h2 class="text-2xl md:text-3xl neon-shadow mb-4">++ LET'S SYNTHESIZE ++</h2>
                
                <!-- Project Selection -->
                <div id="project-selection" class="mb-6 space-y-4">
                    <div>
                        <label class="form-label">[ SELECCIONAR PROYECTO ]</label>
                        <div class="flex gap-4 items-center">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="project-type" value="new" id="project-type-new" checked class="form-radio">
                                <span>Nuevo Proyecto</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="project-type" value="existing" id="project-type-existing" class="form-radio">
                                <span>Proyecto Existente</span>
                            </label>
                        </div>
                    </div>
                    <div id="existing-project-select" class="hidden">
                        <label for="existing-project-name" class="form-label">[ PROYECTO ]</label>
                        <select id="existing-project-name" class="form-select text-lg">
                            <option value="">Cargando proyectos...</option>
                        </select>
                    </div>
                </div>
                
                <!-- Chat Interface for Free Text Input -->
                <div id="chat-interface" class="space-y-4 mb-6">
                    <div id="chat-messages" class="space-y-3 max-h-96 overflow-y-auto mb-4">
                        <div class="text-sm text-gray-300/70">
                            // Escribe o graba un mensaje de voz sobre tu proyecto. Analizaré tu mensaje y llenaré el formulario automáticamente.
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <textarea 
                            id="user-input" 
                            class="form-textarea text-lg flex-grow" 
                            rows="6" 
                            placeholder="Ejemplo: Necesito producción de audio para 3 tracks de 2 minutos cada uno en formato WAV 48kHz/24bit. El proyecto se llama 'Mi Album' y necesito entregarlo el 15 de diciembre. Es un proyecto nuevo..."
                        ></textarea>
                    </div>
                    <div class="flex gap-2 items-center">
                        <button 
                            id="record-voice-btn" 
                            class="nav-link submit-btn px-6 py-3 rounded-lg text-xl sm:text-2xl flex items-center gap-2"
                            title="Grabar mensaje de voz"
                        >
                            <span id="record-text">[ GRABAR VOZ ]</span>
                        </button>
                        <div id="recording-status" class="hidden text-red-500 text-sm flex items-center gap-2">
                            <span class="animate-pulse">●</span>
                            <span>Grabando...</span>
                        </div>
                        <button 
                            id="parse-input-btn" 
                            class="nav-link submit-btn flex-1 px-6 py-3 rounded-lg text-xl sm:text-2xl"
                        >
                            [ SEND ]
                        </button>
                    </div>
                    <div id="chat-status" class="text-center text-sm"></div>
                </div>
                
                <!-- Form removed - Now using direct data flow: GPT → Data → Calculate → Display -->
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="name" class="form-label">[ NOMBRE_CLIENTE ] (Opcional)</label>
                            <input type="text" id="name" name="name" class="form-input text-lg">
                            <div id="name-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                        </div>
                        <div>
                            <label for="email" class="form-label">[ EMAIL_CLIENTE ] (Opcional)</label>
                            <input type="email" id="email" name="email" class="form-input text-lg">
                            <div id="email-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                        </div>
                    </div>

                    <!-- Campos ocultos de Formspree -->
                    <input type="hidden" name="_replyto" id="form-replyto">
                    <input type="hidden" name="_subject" id="form-subject">


                    <div>
                        <label for="project-name" class="form-label">[ NOMBRE_PROYECTO ]</label>
                        <input type="text" id="project-name" name="project-name" class="form-input text-lg" required>
                        <div id="project-name-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                    </div>

                    <!-- Checkbox de Proyecto Existente -->
                    <div class="pl-4">
                        <label class="flex items-center text-yellow-300">
                            <input type="checkbox" id="existing-project" name="existing-project" value="true" class="form-checkbox">
                            <span class="ml-3">¿Es un añadido a un proyecto existente?</span>
                        </label>
                    </div>


                    <!-- Calculadora de Cotización (LÓGICA DE CHECKBOX) -->
                    <div id="quote-form-calculator" class="space-y-4">
                        <label class="form-label">[ SERVICIOS REQUERIDOS ]</label>

                        <div class="space-y-3" id="service-group">
                            <label class="flex items-center">
                                <input type="checkbox" id="service-audio" name="service_type" value="Audio" class="form-checkbox">
                                <span class="ml-3">PRODUCCIÓN DE AUDIO</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="service-video" name="service_type" value="Video" class="form-checkbox">
                                <span class="ml-3">PRODUCCIÓN DE VIDEO (incluye audio del video)</span>
                            </label>
                        </div>
                        <div id="service-type-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                        
                        <!-- Contenedor Dinámico para Audio -->
                        <div id="audio-controls-container" class="hidden space-y-4 pt-4 border-t border-dashed border-gray-500/50">
                            <h3 class="text-xl text-yellow-300">[ DETALLES DE AUDIO ]</h3>
                            <div class="w-full sm:w-1/2">
                                <label for="audio_quantity" class="form-label">[ CANTIDAD DE ENTREGABLES (Audio) ]</label>
                                <select id="audio_quantity" name="audio_quantity" class="form-select text-lg">
                                    <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>
                                    <option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10+</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label">[ DURACIÓN (POR C/U) (Audio) ]</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="audio_min" class="form-label text-sm">[ MINUTOS ]</label>
                                        <input type="number" id="audio_min" name="audio_min" class="form-input text-lg" min="0" value="0" step="1">
                                    </div>
                                    <div>
                                        <label for="audio_sec" class="form-label text-sm">[ SEGUNDOS ]</label>
                                        <input type="number" id="audio_sec" name="audio_sec" class="form-input text-lg" min="0" max="59" step="1" value="0">
                                    </div>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="format_av_audio" class="form-label text-sm">[ FORMATO (.WAV, .MP3...) ]</label>
                                    <input type="text" id="format_av_audio" name="format_av_audio" class="form-input text-lg" placeholder=".WAV, .MP3">
                                </div>
                                <div>
                                    <label for="resolution_av_audio" class="form-label text-sm">[ CALIDAD (48kHz/24bit...) ]</label>
                                    <input type="text" id="resolution_av_audio" name="resolution_av_audio" class="form-input text-lg" placeholder="48kHz/24bit">
                                </div>
                            </div>
                        </div>

                        <!-- Contenedor Dinámico para Video -->
                        <div id="video-controls-container" class="hidden space-y-4 pt-4 border-t border-dashed border-gray-500/50">
                            <h3 class="text-xl text-yellow-300">[ DETALLES DE VIDEO ]</h3>
                            <div class="w-full sm:w-1/2">
                                <label for="video_quantity" class="form-label">[ CANTIDAD DE ENTREGABLES (Video) ]</label>
                                <select id="video_quantity" name="video_quantity" class="form-select text-lg">
                                    <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>
                                    <option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10+</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label">[ DURACIÓN (POR C/U) (Video) ]</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="video_min" class="form-label text-sm">[ MINUTOS ]</label>
                                        <input type="number" id="video_min" name="video_min" class="form-input text-lg" min="0" value="0" step="1">
                                    </div>
                                    <div>
                                        <label for="video_sec" class="form-label text-sm">[ SEGUNDOS ]</label>
                                        <input type="number" id="video_sec" name="video_sec" class="form-input text-lg" min="0" max="59" step="1" value="0">
                                    </div>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="format_av_video" class="form-label text-sm">[ FORMATO (.MP4, .MOV...) ]</label>
                                    <input type="text" id="format_av_video" name="format_av_video" class="form-input text-lg" placeholder=".MP4, .MOV">
                                </div>
                                <div>
                                    <label for="resolution_av_video" class="form-label text-sm">[ RESOLUCIÓN (4K, 1080p...) ]</label>
                                    <input type="text" id="resolution_av_video" name="resolution_av_video" class="form-input text-lg" placeholder="4K, 1080p">
                                </div>
                            </div>
                        </div>

                        <!-- Inputs Ocultos para cálculos -->
                        <input type="hidden" id="calculated_base_fee" name="calculated_base_fee">
                        <input type="hidden" id="calculated_audio_fee" name="calculated_audio_fee">
                        <input type="hidden" id="calculated_video_fee" name="calculated_video_fee">

                    </div>
                    <!-- Fin de la Calculadora -->

                    <!-- Contenedor de Cotización -->
                    <div id="quote-display-container">
                        <div id="quote-estimate-display">
                            <label for="estimated-quote" class="form-label">[ COTIZACIÓN ESTIMADA (MXN) ]</label>
                            <input type="text" id="estimated-quote" class="form-input text-lg text-yellow-300" readonly value="// SELECCIONA UN SERVICIO">
                            <input type="hidden" name="cotizacion_estimada" id="hidden-quote">
                        </div>
                    </div>
                    
                    <div>
                        <label for="timeline" class="form-label">[ FECHA DE ENTREGA DESEADA ] (Opcional)</label>
                        <input type="date" id="timeline" name="timeline" class="form-input text-lg">
                        <div id="timeline-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                        <p id="urgency-fee-note" class="text-sm text-red-500 hidden mt-1">> Tarifa de Urgencia Aplicada: +40% sobre el total</p>
                    </div>

                    <div>
                        <label for="brief" class="form-label">[ BRIEF / DESCRIPCIÓN DEL PROYECTO ]</label>
                        <textarea id="brief" name="brief" rows="4" class="form-textarea text-lg" placeholder="Describe la visión, metas y entregables..." required></textarea>
                        <div id="brief-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                    </div>

                    <div>
                        <label for="assets-link" class="form-label">[ LINK DE RECURSOS (ASSETS) ]</ISO_8601>
                        <input type="url" id="assets-link" name="assets-link" class="form-input text-lg" placeholder="Link a WeTransfer, Drive... (guiones, refs visuales, audio, etc.)">
                        <p class="text-sm mt-1 text-gray-300/70">> Sube tus archivos a la nube y pega el link para compartir aquí.</p>
                    </div>
                    
                    <!-- Checkbox de Términos y Condiciones -->
                    <div class="flex items-start space-x-2">
                        <input type="checkbox" id="terms-checkbox" name="terms" class="form-checkbox mt-1" required>
                        <div class="flex-1">
                            <label for="terms-checkbox" class="form-label mb-0 text-sm sm:text-base">
                                Acepto los términos de servicio (pago contra-entrega, 3 revisiones, etc.)
                            </label>
                            <div id="terms-checkbox-error" class="form-error hidden text-red-500 text-sm mt-1"></div>
                        </div>
                    </div>


            </div> <!-- Fin de content-area -->

        </main>

        <!-- Footer: Redes -->
        <footer class="absolute bottom-2 right-2 sm:bottom-4 sm:right-4 flex gap-2 sm:gap-4 text-xl sm:text-2xl md:text-3xl">
            <a href="#" class="nav-link p-2 rounded-lg" title="SoundCloud">SC</a>
            <a href="#" class="nav-link p-2 rounded-lg" title="Vimeo">VM</a>
            <a href="#" class="nav-link p-2 rounded-lg" title="Instagram">IG</a>
        </footer>

    </div>

    <!-- Modal de Confirmación de Cotización -->
    <div id="quote-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" id="modal-overlay"></div>
        
        <div id="quote-modal-content" class="content-box w-full max-w-2xl z-10 p-6 flex flex-col max-h-[90vh]">
            
            <div id="quote-modal-header" class="text-center mb-4">
                <h1 class="text-5xl font-bold glitch-text" style="color: #ffffff; text-shadow: 3px 3px #00ff00, -3px -3px #ff00ff;">
                    FUKURO
                </h1>
                <p class="text-2xl katakana neon-shadow">フクロウ</p>
                <p class="text-lg tracking-widest text-yellow-300" style="text-shadow: 0 0 5px #facc15;">
                    A/V SYNTHESIS
                </p>
                <h2 class="text-3xl neon-shadow mt-4">++ CONFIRMAR COTIZACIÓN ++</h2>
            </div>
            
            <div id="quote-summary" class="flex-grow overflow-y-auto space-y-3 mb-6 pr-2 text-lg">
                <!-- El resumen de la cotización se inyectará aquí -->
            </div>
            
            <!-- Contenido solo para impresión (para cotizacion.html) -->
            <div id="quote-summary-print-container" class="hidden">
                <div class="text-center mb-6">
                    <h1 class="text-5xl font-bold">FUKURO</h1>
                    <p class="text-2xl katakana">フクロウ</p>
                    <p class="text-xl tracking-widest">A/V SYNTHESIS</p>
                    <h2 class="text-3xl mt-4">++ RESUMEN DE COTIZACIÓN ++</h2>
                </div>
                <div id="quote-summary-print" class="text-base">
                    <!-- El resumen se copiará aquí -->
                </div>
            </div>

            
            <div id="modal-status" class="mt-4 text-center text-lg"></div>

            <div id="modal-controls" class="flex flex-col sm:flex-row justify-between gap-4 mt-6">
                <button id="modify-quote-btn" class="nav-link submit-btn w-full px-6 py-3 rounded-lg text-xl">
                    [ NUEVA COTIZACIÓN ]
                </button>
                <!-- Botón de Imprimir/PNG eliminado -->
                <button id="accept-quote-btn" class="nav-link submit-btn w-full px-6 py-3 rounded-lg text-xl bg-yellow-500/20 border-yellow-300 text-yellow-300 hover:bg-yellow-300 hover:text-black">
                    [ ACEPTAR Y ENVIAR ]
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Cotización para Chat -->
    <div id="chat-quote-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" id="chat-modal-overlay"></div>
        <div class="content-box w-full max-w-2xl z-10 p-6 flex flex-col max-h-[90vh]">
            <div class="text-center mb-4">
                <h2 class="text-3xl neon-shadow">++ RESUMEN AUTOMÁTICO ++</h2>
                <p class="text-sm text-gray-300">// Revisa y envía tu cotización.</p>
            </div>
            <div id="chat-quote-summary" class="flex-grow overflow-y-auto space-y-3 mb-6 pr-2 text-lg"></div>
            <div id="chat-modal-status" class="mt-2 text-center text-sm"></div>
            <div class="flex flex-col sm:flex-row justify-between gap-4 mt-6">
                <button id="chat-modal-new-btn" class="nav-link submit-btn w-full px-6 py-3 rounded-lg text-xl">
                    [ NUEVA COTIZACIÓN ]
                </button>
                <button id="chat-modal-send-btn" class="nav-link submit-btn w-full px-6 py-3 rounded-lg text-xl bg-yellow-500/20 border-yellow-300 text-yellow-300 hover:bg-yellow-300 hover:text-black">
                    [ ENVIAR ]
                </button>
            </div>
        </div>
    </div>

    <!-- Date Picker Modal -->
    <div id="date-picker-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" id="date-picker-overlay"></div>
        <div class="content-box w-full max-w-md z-10 p-6 flex flex-col">
            <div class="text-center mb-6">
                <h2 class="text-3xl neon-shadow">++ FECHA DE ENTREGA ++</h2>
                <p class="text-sm text-gray-300 mt-2">// Selecciona la fecha de entrega del proyecto</p>
            </div>
            <div class="space-y-4">
                <div>
                    <label for="date-picker-input" class="form-label">[ FECHA DE ENTREGA ]</label>
                    <input 
                        type="date" 
                        id="date-picker-input" 
                        class="form-input text-lg w-full" 
                        required
                    >
                </div>
                <div class="flex gap-4 mt-6">
                    <button type="button" id="date-picker-cancel-btn" class="nav-link submit-btn flex-1 px-6 py-3 rounded-lg text-xl">
                        [ CANCELAR ]
                    </button>
                    <button type="button" id="date-picker-confirm-btn" class="nav-link submit-btn flex-1 px-6 py-3 rounded-lg text-xl bg-yellow-500/20 border-yellow-300 text-yellow-300 hover:bg-yellow-300 hover:text-black">
                        [ CONFIRMAR ]
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal for Backend Access -->
    <div id="login-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" id="login-modal-overlay"></div>
        <div class="content-box w-full max-w-md z-10 p-6 flex flex-col">
            <div class="text-center mb-6">
                <h2 class="text-3xl neon-shadow">++ BACKEND ACCESS ++</h2>
                <p class="text-sm text-gray-300 mt-2">// Ingresa tus credenciales</p>
            </div>
            <div id="login-error" class="hidden text-red-500 text-sm mb-4 text-center"></div>
            <form id="login-form" class="space-y-4">
                <div>
                    <label for="login-username" class="form-label">[ USUARIO ]</label>
                    <input type="text" id="login-username" class="form-input text-lg" required autocomplete="username">
                </div>
                <div>
                    <label for="login-password" class="form-label">[ CONTRASEÑA ]</label>
                    <input type="password" id="login-password" class="form-input text-lg" required autocomplete="current-password">
                </div>
                <div class="flex gap-4 mt-6">
                    <button type="button" id="login-cancel-btn" class="nav-link submit-btn flex-1 px-6 py-3 rounded-lg text-xl">
                        [ CANCELAR ]
                    </button>
                    <button type="submit" id="login-submit-btn" class="nav-link submit-btn flex-1 px-6 py-3 rounded-lg text-xl bg-yellow-500/20 border-yellow-300 text-yellow-300 hover:bg-yellow-300 hover:text-black">
                        [ ACCEDER ]
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Backend Access Area (shown after login) -->
    <div id="backend-access" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" id="backend-overlay"></div>
        <div class="content-box w-full max-w-4xl z-10 p-6 flex flex-col max-h-[90vh]">
            <div class="text-center mb-6">
                <h2 class="text-3xl neon-shadow">++ BACKEND DASHBOARD ++</h2>
                <button id="backend-logout-btn" class="mt-4 nav-link submit-btn px-4 py-2 rounded-lg text-sm">
                    [ CERRAR SESIÓN ]
                </button>
            </div>
            <div class="flex-grow overflow-y-auto space-y-6 pr-2">
                <div>
                    <h3 class="text-2xl text-yellow-300 mb-4">API Endpoints</h3>
                    <div class="space-y-2 text-sm font-mono">
                        <p><span class="text-green-400">GET</span> <span class="text-gray-300">/api/projects</span> - List all projects</p>
                        <p><span class="text-green-400">GET</span> <span class="text-gray-300">/api/projects/:name</span> - Get specific project</p>
                        <p><span class="text-blue-400">POST</span> <span class="text-gray-300">/api/projects</span> - Create/update project</p>
                        <p><span class="text-blue-400">POST</span> <span class="text-gray-300">/api/quotes</span> - Submit a quote</p>
                        <p><span class="text-green-400">GET</span> <span class="text-gray-300">/api/quotes</span> - Get all quotes</p>
                    </div>
                </div>
                <div>
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-2xl text-yellow-300">Projects</h3>
                        <button id="add-project-btn" class="nav-link submit-btn px-4 py-2 rounded-lg text-sm">
                            [ + NUEVO PROYECTO ]
                        </button>
                    </div>
                    <div id="add-project-form" class="hidden mb-4 p-4 border border-gray-500/50 rounded">
                        <input type="text" id="new-project-name" class="form-input text-lg mb-3" placeholder="Nombre del proyecto">
                        <div class="flex gap-2">
                            <button id="save-new-project-btn" class="nav-link submit-btn px-4 py-2 rounded-lg text-sm">
                                [ CREAR ]
                            </button>
                            <button id="cancel-new-project-btn" class="nav-link submit-btn px-4 py-2 rounded-lg text-sm">
                                [ CANCELAR ]
                            </button>
                        </div>
                    </div>
                    <div id="backend-projects-list" class="space-y-2">
                        <p class="text-gray-400">Cargando...</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl text-yellow-300 mb-4">Recent Quotes</h3>
                    <div id="backend-quotes-list" class="space-y-2">
                        <p class="text-gray-400">Cargando...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cargar el archivo JavaScript externo -->
    <script type="module" src="main.js"></script>
    
</body>
</html>
